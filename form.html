<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pick Up Form</title>
    <link rel="stylesheet" href="style.css">
    <!-- <script src="script.js"></script> -->

</head>

<body>


    <div class="container">
        <div class="header">
            <h1>Pick Up Form</h1>
        </div>
        <div class="info">
            <table>
                <tr>
                    <td>
                        Ozworld Timber Flooring<br>
                        45 Winterton Road, Clayton VIC 3168<br>
                        04 7569 2231<br>
                        info@ozworld.com.au
                    </td>
                    <td>
                        <div>
                            <input type="checkbox" id="pick_up">
                            <label for="pick_up">pickup</label><br>

                            <input type="checkbox" id="return">
                            <label for="retun">return</label><br>

                            <input type="checkbox" id="others">
                            <label for="others">others</label><br>

                        </div>

                    </td>
                    <td>
                        Date: <input type="date" name="date"><br>
                        Time: <input type="time" name="time">
                    </td>
                </tr>
                <tr>
                    <td>Shipping Address (If Applicable)</td>
                    <td colspan="4"><input type="text" name="shipping_address"></td>
                </tr>

                <tr>
                    <td>Customer Name</td>
                    <td><input type="text" name="customer_name"></td>
                    <td>Handler By (Print Name)</td>
                    <td><input type="text" name="handler"></td>
                </tr>
                <tr>
                    <td>Invoice No.</td>
                    <td><input type="text" name="invoice_no"></td>
                    <td>Vehicle Plate No.</td>
                    <td><input type="text" name="vehicle_plate_no"></td>
                </tr>
                <tr>
                    <td>Job Ref</td>
                    <td><input type="text" name="job_ref"></td>
                    <td>ETA</td>
                    <td><input type="text" name="eta"></td>
                </tr>
                <tr>

                </tr>
                <tr>
                    <td>Received by:</td>
                    <td>
                        <input type="checkbox" name="oz_courier"> Oz Courier<br>
                        <input type="checkbox" name="installer"> Installer<br>
                        <input type="checkbox" name="customer"> Customer<br>

                    </td>

                    <td>
                        <div>
                            <p>Please sign on the dotted line below.</p>
                            <iframe src=signature.svg></iframe>
                            <div>
                                <button onclick=showSignature()>Show signaure path data</button>
                                <button onclick=clearSignature()>Clear signature</button>
                                <div id=pathdata></div>
                            </div>
                        </div>
                    </td>
                </tr>

            </table>
        </div>


        <div class="details">
            <table id="order-table">
                <tr>
                    <th>Order</th>
                    <th>Product Code</th>
                    <th>Specs</th>
                    <th>Pack Size</th>
                    <th>Pack Qty</th>
                    <th>Total M2</th>
                    <th>Remark</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td><input type="text" name="product_code_1"></td>
                    <td><input type="text" name="specs_1"></td>
                    <td><input type="text" name="pack_size_1"></td>
                    <td><input type="text" name="pack_qty_1"></td>
                    <td><input type="text" name="total_m2_1"></td>
                    <td><input type="text" name="remark_1"></td>
                    <td><button type="button" class="delete-row">Delete</button></td>
                </tr>
                <tr>
                    <td>Grand Total:</td>
                    <td colspan="7"><input type="text" name="grand_total"></td>
                </tr>
            </table>
            <button type="button" id="add-item">Add Item</button>
        </div>

        <div class="take_photo">
            <p>Delivery Pictures</p>
            <div class="profile-picture">
                <button id="take-photo-btn">Take Photo</button>
                <input type="file" accept="image/*" capture="environment" id="photo-input" style="display:none;"
                    multiple />
                <div class="photo-container" id="photo-container"></div>
            </div>
        </div>

        <div class="note">
            <table>
                <tr>
                    <td>Note:</td>
                    <td>
                        <input type="checkbox" name="pick_up"> Stock adjustment <input type="date" name="date"><br>
                        <input type="checkbox" name="return"> Invoice/Credit note issue <input type="text"
                            name="grand_total">

                    </td>
                    <td>PUF210 <input type="number" name="grand_total"></td>
                </tr>
            </table>
        </div>
        <div>
            <div><button onClick="window.print()">Print this page
                </button></div>
        </div>
    </div>

</body>

</html>
<script>
    // script to get signature
    var svg = document.getElementsByTagName('iframe')[0].contentWindow;
    var pathdata = document.getElementById('pathdata');

    function showSignature() {
        pathdata.textContent = svg.getSignature();
    }

    function clearSignature() {
        svg.clearSignature();
        pathdata.textContent = '';
    }

    // script to take picture
    document.getElementById('take-photo-btn').addEventListener('click', function () {
        document.getElementById('photo-input').click();
    });

    document.getElementById('photo-input').addEventListener('change', function (event) {
        const files = event.target.files;
        const photoContainer = document.getElementById('photo-container');

        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();

            reader.onload = function (e) {
                const photoPreview = document.createElement('div');
                photoPreview.classList.add('photo-preview');

                const photo = document.createElement('img');
                photo.src = e.target.result;
                photo.alt = 'Delivery Picture';

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.addEventListener('click', function () {
                    photoPreview.remove();
                });

                photoPreview.appendChild(photo);
                photoPreview.appendChild(deleteButton);
                photoContainer.appendChild(photoPreview);
            };

            reader.readAsDataURL(file);
        }
    });

    // script to modify details
    document.getElementById('add-item').addEventListener('click', function () {
        const table = document.getElementById('order-table');
        const rowCount = table.rows.length;
        const newRow = table.insertRow(rowCount - 1);

        newRow.innerHTML = `
        <td>${rowCount - 1}</td>
        <td><input type="text" name="product_code_${rowCount - 1}"></td>
        <td><input type="text" name="specs_${rowCount - 1}"></td>
        <td><input type="text" name="pack_size_${rowCount - 1}"></td>
        <td><input type="text" name="pack_qty_${rowCount - 1}"></td>
        <td><input type="text" name="total_m2_${rowCount - 1}"></td>
        <td><input type="text" name="remark_${rowCount - 1}"></td>
        <td><button type="button" class="delete-row">Delete</button></td>
    `;

        attachDeleteEvent(newRow.querySelector('.delete-row'));
    });

    function attachDeleteEvent(button) {
        button.addEventListener('click', function () {
            const row = this.closest('tr');
            row.remove();
            updateOrderNumbers();
        });
    }

    document.querySelectorAll('.delete-row').forEach(button => {
        attachDeleteEvent(button);
    });

    function updateOrderNumbers() {
        const rows = document.querySelectorAll('#order-table tr');
        rows.forEach((row, index) => {
            if (index > 0 && index < rows.length - 1) {
                row.cells[0].textContent = index;
            }
        });
    }



</script>